

var parent_convo = $("#c<%= escape_javascript(@conversation.conversationable.conversation.id.to_s() )%>");
var parent_convo_children = $("#c<%= escape_javascript(@conversation.conversationable.conversation.id.to_s() )%> .post");
var parent_convo_siblings = $("#c<%= escape_javascript(@conversation.conversationable.conversation.id.to_s() )%> ~ .conversation");

var parent_post = $("#p<%= escape_javascript(@conversation.conversationable.id.to_s() )%>");


parent_convo_children.css("opacity", "0.7");
parent_post.css("opacity", "1");

parent_convo_siblings.remove();



var left_offset = ( parent_post.attr("index") - 1)* 215 + 100;

parent_convo.find(".arrow").css("left", left_offset ).css("display","block").animate({
    opacity: 1
  }, 100, function() {
    // Animation complete.
  });

parent_convo.after("<%= escape_javascript(render(@conversation) )%>"); 

var convo = $("#c<%= escape_javascript(@conversation.id.to_s() )%>");

convo.data("realHeight", convo.height() ).css("height","0").animate({
    height: convo.data("realHeight")
  }, 250, function() {
    // Animation complete.
  });